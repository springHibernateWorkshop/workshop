CREATE TABLE ROLE_TAB (
  ROLE_ID BIGINT NOT NULL,
  NAME VARCHAR(50) NOT NULL, 
  PRIMARY KEY (ROLE_ID), 
  CONSTRAINT ROLE_NAME_DX_UNIQUE UNIQUE (NAME)
);

CREATE TABLE RIGHT_TAB (
  RIGHT_ID BIGINT NOT NULL,
  NAME VARCHAR(50) NOT NULL, 
  PRIMARY KEY (RIGHT_ID), 
  CONSTRAINT RIGHT_NAME_DX_UNIQUE UNIQUE (NAME)
);

CREATE TABLE PERMISSION_TAB (
  ROLE_ID BIGINT NOT NULL,
  RIGHT_ID BIGINT NOT NULL,
  PRIMARY KEY (ROLE_ID, RIGHT_ID),
  CONSTRAINT FK_ROLE FOREIGN KEY (ROLE_ID) REFERENCES ROLE_TAB(ROLE_ID),
  CONSTRAINT FK_RIGHT FOREIGN KEY (RIGHT_ID) REFERENCES RIGHT_TAB(RIGHT_ID)
);

CREATE TABLE CATEGORY_TAB (
  CATEGORY_ID BIGINT NOT NULL,
  NAME VARCHAR(150) NOT NULL,
  VERSION TIMESTAMP,
  PRIMARY KEY (CATEGORY_ID),
  CONSTRAINT CATEGORY_NAME_DX_UNIQUE UNIQUE (NAME)
);

CREATE TABLE SHOP_TAB (
  SHOP_ID BIGINT NOT NULL,
  NAME VARCHAR(250) NOT NULL,
  ADDRESS VARCHAR(250) NOT NULL,
  VERSION TIMESTAMP,
  PRIMARY KEY (SHOP_ID),
  CONSTRAINT SHOP_NAME_DX_UNIQUE UNIQUE (NAME)
);

CREATE TABLE USER_TAB (
  USER_ID BIGINT NOT NULL,
  USERNAME VARCHAR(150) NOT NULL,
  PASSWORD VARCHAR(150) NOT NULL,
  ROLE_ID BIGINT,
  VERSION TIMESTAMP,
  PRIMARY KEY (USER_ID),
  CONSTRAINT USER_NAME_DX_UNIQUE UNIQUE (USERNAME),
  CONSTRAINT FK_USER_ROLE FOREIGN KEY (ROLE_ID) REFERENCES ROLE_TAB(ROLE_ID)
);

CREATE TABLE SUPERIOR_TAB (
  SUPERIOR_ID BIGINT NOT NULL,
  NAME VARCHAR(150) NOT NULL,
  USER_ID BIGINT, 
  VERSION TIMESTAMP,
  PRIMARY KEY (SUPERIOR_ID),
  CONSTRAINT FK_SUPERIOR_USER FOREIGN KEY (USER_ID) REFERENCES USER_TAB(USER_ID)
);

CREATE TABLE EMPLOYEE_TAB (
  EMPLOYEE_ID BIGINT NOT NULL,
  NAME VARCHAR(150) NOT NULL,
  USER_ID BIGINT, 
  SUPERIOR_ID BIGINT NOT NULL, 
  VERSION TIMESTAMP,
  PRIMARY KEY (EMPLOYEE_ID),
  CONSTRAINT FK_EMPLOYEE_USER FOREIGN KEY (USER_ID) REFERENCES USER_TAB(USER_ID),
  CONSTRAINT FK_EMPLOYEE_SUPERIOR FOREIGN KEY (SUPERIOR_ID) REFERENCES SUPERIOR_TAB(SUPERIOR_ID)
);

CREATE TABLE EXPENSE_TAB (
  EXPENSE_ID BIGINT NOT NULL,
  NAME VARCHAR(150) NOT NULL,
  TOTAL FLOAT(24) NOT NULL ,
  EXPENSE_DATE DATE NOT NULL, 
  CATEGORY_ID BIGINT NOT NULL , 
  SHOP_ID BIGINT NULL, 
  EMPLOYEE_ID BIGINT NOT NULL, 
  STATUS ENUM('INITIAL', 'PENDING', 'APPROVED', 'REJECTED') NOT NULL,
  NOTE VARCHAR(255) NULL,
  VERSION TIMESTAMP,
  PRIMARY KEY (EXPENSE_ID),
  CONSTRAINT FK_EXPENSE_CATEGORY FOREIGN KEY (CATEGORY_ID) REFERENCES CATEGORY_TAB(CATEGORY_ID),
  CONSTRAINT FK_EXPENSE_SHOP FOREIGN KEY (SHOP_ID) REFERENCES SHOP_TAB(SHOP_ID),
  CONSTRAINT FK_EXPENSE_EMPLOYEE FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEE_TAB(EMPLOYEE_ID)
);